<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ae2f_docs: submod/ae2f/c89atomic Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ae2f_docs
   </div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_05e9712f8d0e1ee89731868e1612d514.html','',''); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
<div id="container"><div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">c89atomic Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:extras" id="r_extras"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_afd5d0748bbc1ff858a0b550776ae5ea.html">extras</a></td></tr>
<tr class="memitem:tests" id="r_tests"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_d8b9d38b0d2b87729fceffbca987f26a.html">tests</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-files" class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:c89atomic_2Ec" id="r_c89atomic_2Ec"><td class="memItemLeft" align="right" valign="top"><a href="df/d0d/c89atomic_8c_source.html"><span class="icondoc"><div class="doc-icon"></div></span></a>&#160;</td><td class="memItemRight" valign="bottom"><b>c89atomic.c</b></td></tr>
<tr class="memitem:c89atomic_2Eh" id="r_c89atomic_2Eh"><td class="memItemLeft" align="right" valign="top"><a href="d0/d57/c89atomic_8h_source.html"><span class="icondoc"><div class="doc-icon"></div></span></a>&#160;</td><td class="memItemRight" valign="bottom"><b>c89atomic.h</b></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h4 align="center">C89 compatible atomics.</h4>
<p align="center"></p>
<p><a href="https://discord.gg/9vpqbjU"><img src="https://img.shields.io/discord/712952679415939085?label=discord&amp;logo=discord" alt="discord" class="inline"/></a> </p>
<p>This library aims to implement an equivalent to the C11 atomics library. It's intended to be used as a way to enable the use of atomics in a mostly consistent manner to modern C, while still enabling compatibility with older compilers. This is <em>not</em> a drop-in replacement for C11 atomics, but is very similar. Only limited testing has been done so use at your own risk. I'm happy to accept feedback and pull requests with bug fixes.</p>
<p>The following compilers are supported:</p>
<ul>
<li>Visual Studio from VC6 (Earlier versions may work, but are untested.)</li>
<li>GCC starting from 2.7 (Earlier versions lack support for extended inline assembly.)</li>
<li>Clang</li>
<li>Intel oneAPI (Tested with 2025.0.4. Intel C++ Compiler Classic has not been tested.)</li>
<li>TinyCC/TCC (Tested with 0.9.27)</li>
<li>OpenWatcom (Tested with 2.0)</li>
<li>Digital Mars</li>
<li>Borland C++ (Tested with 5.02)</li>
</ul>
<p>New compilers will use intrinsics. GCC-likes, such as GCC and Clang, will use <span class="tt">__atomic_*</span> intrinsics through a pre-processor define and should have no overhead. This uses <span class="tt">__GNUC__</span> to detect GCC-likes.</p>
<p>Old compilers, or compilers lacking support for intrinsics, will use inlined assembly. There are two inlined assembly paths: GCC-style (GAS syntax) and MSVC-style. For an old compiler to be supported, it must support one of these two paths. Note that only 32- and 64-bit x86 is supported for inlined assembly. I have not thouroughly tested the inlined assembly paths. It passes basics tests, but things like memory ordering may have some issues. Advice welcome on how to improve this.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md41"></a>
Usage</h2>
<p>In most cases you can use this as a header-only library. Just add <span class="tt"><a class="el" href="d0/d57/c89atomic_8h_source.html">c89atomic.h</a></span> to your source tree and include it:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;c89atomic.h&quot;</span></div>
</div><!-- fragment --><p>Everything is implemented with defines and inline functions. In some cases there may not be native hardware support for a given atomic operation in which case the library will emulate it with a global spinlock. If you get errors about <span class="tt">c89atomic_global_lock</span> being undefined, you need to integrate <a class="el" href="df/d0d/c89atomic_8c_source.html">c89atomic.c</a> into your build. This will not usually be required on modern compilers.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md42"></a>
Differences With C11</h2>
<p>For practicality, this is not a drop-in replacement for C11's <span class="tt">stdatomic.h</span>. Below are the main differences between c89atomic and stdatomic.</p>
<ul>
<li>All operations require an explicit size which is specified by the name of the function, and only 8-, 16-, 32- and 64-bit operations are supported. Objects of arbitrary sizes are not supported.</li>
<li>All APIs are namespaced with <span class="tt">c89</span>.</li>
<li><span class="tt">c89atomic_*</span> data types are undecorated (there is no <span class="tt">_Atomic</span> decoration).</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md43"></a>
Types and Functions</h2>
<p>The following types and functions are implemented: </p><div class="fragment"><div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| C11 Atomics                             | C89 Atomics                                   |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| #include &lt;stdatomic.h&gt;                  | #include &quot;c89atomic.h&quot;                        |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| memory_order                            | c89atomic_memory_order                        |</div>
<div class="line">|     memory_order_relaxed                |     c89atomic_memory_order_relaxed            |</div>
<div class="line">|     memory_order_consume                |     c89atomic_memory_order_consume            |</div>
<div class="line">|     memory_order_acquire                |     c89atomic_memory_order_acquire            |</div>
<div class="line">|     memory_order_release                |     c89atomic_memory_order_release            |</div>
<div class="line">|     memory_order_acq_rel                |     c89atomic_memory_order_acq_rel            |</div>
<div class="line">|     memory_order_seq_cst                |     c89atomic_memory_order_seq_cst            |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_flag                             | c89atomic_flag                                |</div>
<div class="line">| atomic_bool                             | c89atomic_bool                                |</div>
<div class="line">| atomic_int8                             | c89atomic_int8                                |</div>
<div class="line">| atomic_uint8                            | c89atomic_uint8                               |</div>
<div class="line">| atomic_int16                            | c89atomic_int16                               |</div>
<div class="line">| atomic_uint16                           | c89atomic_uint16                              |</div>
<div class="line">| atomic_int32                            | c89atomic_int32                               |</div>
<div class="line">| atomic_uint32                           | c89atomic_uint32                              |</div>
<div class="line">| atomic_int64                            | c89atomic_int64                               |</div>
<div class="line">| atomic_uint64                           | c89atomic_uint64                              |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_flag_test_and_set                | c89atomic_flag_test_and_set                   |</div>
<div class="line">| atomic_flag_test_and_set_explicit       | c89atomic_flag_test_and_set_explicit          |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_flag_clear                       | c89atomic_flag_clear                          |</div>
<div class="line">| atomic_flag_clear_explicit              | c89atomic_flag_clear_explicit                 |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_store                            | c89atomic_store_8                             |</div>
<div class="line">| atomic_store_explicit                   | c89atomic_store_16                            |</div>
<div class="line">|                                         | c89atomic_store_32                            |</div>
<div class="line">|                                         | c89atomic_store_64                            |</div>
<div class="line">|                                         | c89atomic_store_explicit_8                    |</div>
<div class="line">|                                         | c89atomic_store_explicit_16                   |</div>
<div class="line">|                                         | c89atomic_store_explicit_32                   |</div>
<div class="line">|                                         | c89atomic_store_explicit_64                   |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_load                             | c89atomic_load_8                              |</div>
<div class="line">| atomic_load_explicit                    | c89atomic_load_16                             |</div>
<div class="line">|                                         | c89atomic_load_32                             |</div>
<div class="line">|                                         | c89atomic_load_64                             |</div>
<div class="line">|                                         | c89atomic_load_explicit_8                     |</div>
<div class="line">|                                         | c89atomic_load_explicit_16                    |</div>
<div class="line">|                                         | c89atomic_load_explicit_32                    |</div>
<div class="line">|                                         | c89atomic_load_explicit_64                    |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_exchange                         | c89atomic_exchange_8                          |</div>
<div class="line">| atomic_exchange_explicit                | c89atomic_exchange_16                         |</div>
<div class="line">|                                         | c89atomic_exchange_32                         |</div>
<div class="line">|                                         | c89atomic_exchange_64                         |</div>
<div class="line">|                                         | c89atomic_exchange_explicit_8                 |</div>
<div class="line">|                                         | c89atomic_exchange_explicit_16                |</div>
<div class="line">|                                         | c89atomic_exchange_explicit_32                |</div>
<div class="line">|                                         | c89atomic_exchange_explicit_64                |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_compare_exchange_weak            | c89atomic_compare_exchange_weak_8             |</div>
<div class="line">| atomic_compare_exchange_weak_explicit   | c89atomic_compare_exchange_weak_16            |</div>
<div class="line">| atomic_compare_exchange_strong          | c89atomic_compare_exchange_weak_32            |</div>
<div class="line">| atomic_compare_exchange_strong_explicit | c89atomic_compare_exchange_weak_64            |</div>
<div class="line">|                                         | c89atomic_compare_exchange_weak_explicit_8    |</div>
<div class="line">|                                         | c89atomic_compare_exchange_weak_explicit_16   |</div>
<div class="line">|                                         | c89atomic_compare_exchange_weak_explicit_32   |</div>
<div class="line">|                                         | c89atomic_compare_exchange_weak_explicit_64   |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_8           |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_16          |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_32          |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_64          |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_explicit_8  |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_explicit_16 |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_explicit_32 |</div>
<div class="line">|                                         | c89atomic_compare_exchange_strong_explicit_64 |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_fetch_add                        | c89atomic_fetch_add_8                         |</div>
<div class="line">| atomic_fetch_add_explicit               | c89atomic_fetch_add_16                        |</div>
<div class="line">|                                         | c89atomic_fetch_add_32                        |</div>
<div class="line">|                                         | c89atomic_fetch_add_64                        |</div>
<div class="line">|                                         | c89atomic_fetch_add_explicit_8                |</div>
<div class="line">|                                         | c89atomic_fetch_add_explicit_16               |</div>
<div class="line">|                                         | c89atomic_fetch_add_explicit_32               |</div>
<div class="line">|                                         | c89atomic_fetch_add_explicit_64               |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_fetch_sub                        | c89atomic_fetch_sub_8                         |</div>
<div class="line">| atomic_fetch_sub_explicit               | c89atomic_fetch_sub_16                        |</div>
<div class="line">|                                         | c89atomic_fetch_sub_32                        |</div>
<div class="line">|                                         | c89atomic_fetch_sub_64                        |</div>
<div class="line">|                                         | c89atomic_fetch_sub_explicit_8                |</div>
<div class="line">|                                         | c89atomic_fetch_sub_explicit_16               |</div>
<div class="line">|                                         | c89atomic_fetch_sub_explicit_32               |</div>
<div class="line">|                                         | c89atomic_fetch_sub_explicit_64               |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_fetch_or                         | c89atomic_fetch_or_8                          |</div>
<div class="line">| atomic_fetch_or_explicit                | c89atomic_fetch_or_16                         |</div>
<div class="line">|                                         | c89atomic_fetch_or_32                         |</div>
<div class="line">|                                         | c89atomic_fetch_or_64                         |</div>
<div class="line">|                                         | c89atomic_fetch_or_explicit_8                 |</div>
<div class="line">|                                         | c89atomic_fetch_or_explicit_16                |</div>
<div class="line">|                                         | c89atomic_fetch_or_explicit_32                |</div>
<div class="line">|                                         | c89atomic_fetch_or_explicit_64                |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_fetch_xor                        | c89atomic_fetch_xor_8                         |</div>
<div class="line">| atomic_fetch_xor_explicit               | c89atomic_fetch_xor_16                        |</div>
<div class="line">|                                         | c89atomic_fetch_xor_32                        |</div>
<div class="line">|                                         | c89atomic_fetch_xor_64                        |</div>
<div class="line">|                                         | c89atomic_fetch_xor_explicit_8                |</div>
<div class="line">|                                         | c89atomic_fetch_xor_explicit_16               |</div>
<div class="line">|                                         | c89atomic_fetch_xor_explicit_32               |</div>
<div class="line">|                                         | c89atomic_fetch_xor_explicit_64               |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_fetch_and                        | c89atomic_fetch_and_8                         |</div>
<div class="line">| atomic_fetch_and_explicit               | c89atomic_fetch_and_16                        |</div>
<div class="line">|                                         | c89atomic_fetch_and_32                        |</div>
<div class="line">|                                         | c89atomic_fetch_and_64                        |</div>
<div class="line">|                                         | c89atomic_fetch_and_explicit_8                |</div>
<div class="line">|                                         | c89atomic_fetch_and_explicit_16               |</div>
<div class="line">|                                         | c89atomic_fetch_and_explicit_32               |</div>
<div class="line">|                                         | c89atomic_fetch_and_explicit_64               |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_thread_fence()                   | c89atomic_thread_fence                        |</div>
<div class="line">| atomic_signal_fence()                   | c89atomic_signal_fence                        |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| atomic_is_lock_free                     | c89atomic_is_lock_free_8                      |</div>
<div class="line">|                                         | c89atomic_is_lock_free_16                     |</div>
<div class="line">|                                         | c89atomic_is_lock_free_32                     |</div>
<div class="line">|                                         | c89atomic_is_lock_free_64                     |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
<div class="line">| (Not Defined)                           | c89atomic_compare_and_swap_8                  |</div>
<div class="line">|                                         | c89atomic_compare_and_swap_16                 |</div>
<div class="line">|                                         | c89atomic_compare_and_swap_32                 |</div>
<div class="line">|                                         | c89atomic_compare_and_swap_64                 |</div>
<div class="line">|                                         | c89atomic_compare_and_swap_ptr                |</div>
<div class="line">+-----------------------------------------+-----------------------------------------------+</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>submod</b></li><li class="navelem"><b>ae2f</b></li><li class="navelem"><a href="dir_05e9712f8d0e1ee89731868e1612d514.html">c89atomic</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
